%================================
\section{Review of Metric Spaces}
%================================


%--------------------------------
\begin{definition}
	Let $X$ be a set. A \textit{metric} on $X$ is a function $\rho: X \times X \to \mathbb R_{\ge 0}$, such that $\forall x, y, z \in X$, the following (metric axioms) holds:
	\begin{enumerate}[M1.]
		\item $\rho(x,y) = 0 \iff x = y$ (identity of indiscernibles);
		\item $\rho(x,y) = \rho(y,x)$ (symmetry).
		\item $\rho(x,y) + \rho(y,z) \ge \rho(x,z)$ (triangle inequality);
	\end{enumerate}
	A \textit{metric space} is a set together with a metric on it, or more formally, a pair $(X,\rho)$ where $X$ is a set and $\rho$ is a metric on $X$.
\end{definition}
%--------------------------------


%--------------------------------
\begin{example} \ 
	\begin{enumerate}
		%--------------------------------
		\item The function $\rho_p: \mathbb R^n \times \mathbb R^n \to \mathbb R_{\ge 0}$ defined by $\forall p \in \overline{\mathbb R}_{\ge 1}$, $\forall x,y \in \mathbb R^n$,
			$$
			\rho_p (x,y) = \left( \sum_{i = 1}^n |x_i - y_i|^p \right)^\frac{1}{p},
			$$
			is a metric on $\mathbb R^n$. Clearly it satisfies identity of indiscernibles and symmetry. For triangle inequality, it is suggested by Minkowski inequality.
			
			Given $x \in \mathbb R^3$, $r \in \mathbb R_{\ge 0}$, and
			$$
			B_\rho = \left\{ y \in \mathbb R^3 \;|\; \rho (x,y) \le r \right\}.
			$$
			
			
			$\forall p, q \in \overline{\mathbb R}_{\ge 1}$, it is true that, $\forall x,y \in \mathbb R^n$,
			$$
			p \le q \implies \rho_p(x,y) \ge \rho_{q}(x,y).
			$$
			Thus, $B_p \subseteq B_q$.
			
			Geometrically, as $p = 1$, $B$ is a octahedron in $\mathbb R^3$ with center $x$ and radius $r$; as $p = 2$, $B$ is a sphere in $\mathbb R^3$ with center $x$ and radius $r$. It is easy to observe that as $p \to \infty$, $B$ tends to a cube in $\mathbb R^3$ with center $x$ and edge length $2r$; i.e.,
			$$
			\rho_\infty(x,y) = \lim_{p \to \infty} \rho_p (x,y) = \sup_{i \in \{1, \ldots, n\}} |x_i - y_i|.
			$$
		%--------------------------------
		
		
		%--------------------------------
		\item Let $f: (X, \rho) \to \mathbb R^n$ with $X \subseteq \mathbb R^m$ be a continuous map on $X$. Let $x, y \in X$, then $\rho': f[X] \times f[X] \to \mathbb R_{\ge 0}$ defined by
			$$
			\rho_p'(x,y) = \int_0^1 f(\ell(t))d_ps(t)
			$$
			where
			$$
			\ell (t) = x + t(y - a)
			$$
			and
			$$
			d_p s(t) = \left( \sum_{i = 1}^m \left|\frac{dg_i}{dt}(t)\right|^p\right)^\frac{1}{p} dt.
			$$
			with $p \ge \overline{\mathbb R}_{\ge 1}$ is a metric on $f[X]$.
			
			Fix $x$ and given $r \in \mathbb R_{\ge 0}$, the set
			$$
			B_p = \left\{ y \in \mathbb R^m : \rho_p'(x,y) \le r \right\}
			$$
			describes a set ``attached'' on $f[X]$ with center $x$.			
			If $p = 2$, $m = 2$ and $n = 3$, and $f: [0, 2 \pi) \times [0, 2 \pi) \to \mathbb R^3$ is defined by
			$$
			f(\lambda, \phi) = \begin{cases}
				r \cos \lambda \sin \phi, \\
				r \sin \lambda \sin \phi, \\
				r \cos \phi,
			\end{cases}
			$$
			then $\rho_2'$ here is a \textit{great circle metric} defined by
			$$
			\rho_2' (x,y) = r\arccos(\sin x_\phi \sin y_\phi + \cos x_\phi \cos y_\phi \cos(x_\lambda - y_\lambda)).
			$$
		%--------------------------------
		
		
		%--------------------------------
		\item Let $a,b \in \mathbb R$ with $a \le b$, and $p \in \overline{\mathbb R}_{\ge 1}$, and $C[a,b]$ denote the set of continuous function $[a,b] \to \mathbb R$.
		
			Then $d_p$ defined by $\forall f, g \in C[a,b]$,
			$$
			\rho_{p}(f,g) = \left( \int_a^b |f - g|^{p} \right)^\frac{1}{p}
			$$
			is a metric on $C[a,b]$.
			
			
			Similar to $\rho_p$ on $\mathbb R^n$,
			$$
			B_{p} = \left\{ g \;|\; \rho(f, g) \le r \right\}
			$$
			defines a set with ``center'' $f$ and ``radius'' $r \in \mathbb R_{\ge 0}$.
			
			It also implies that, on $C[a,b]$, $\forall p, q \in \overline{\mathbb R}_{\ge 1}$, $\forall x,y \in \mathbb R^n$
			$$
			p \le q \implies d_p(f,g) \ge d_q(f,g),
			$$
			and, naturally, $B_p \subseteq B_q$. This is a straight corollary from the same case of $d_p$ on $\mathbb R^n$.
		%--------------------------------
		
		
		%--------------------------------
		\item Let $A$ be a set. The \textit{Hamming metric} $\rho$ on a set $A^n$ is given by $\forall x,y \in A^n$
			$$
			\rho(x,y) = \# \left\{ i \in \{1, \ldots, n\} : x_i \ne y_i \right\}.
			$$
			An example from Wikipedia. The word ``karolin'' and ``kathrin'' can be considered as tuples
			$$
			x = ( \mathrm{ k, a, r, o, l, i, n } ), \; y = ( \mathrm{k, a, t, h, r, i, n} ).
			$$
			For all $i \in \{0, \ldots, 6\} \setminus \{ 0, 1, 4, 6 \}$, $x_i \ne y_i$, and $\# (\{0, \ldots, 6\} \setminus \{ 0, 1, 4, 6 \}) = 3$, thus
			$$
			\rho(x,y) = 3.
			$$
		%--------------------------------
		
		
		%--------------------------------	
		\item Let $(M, \rho)$ be a metric space (for example, $\rho = \rho_2$ on $\mathbb R^n$), and $X, Y \in \mathcal P(M)$. The Hausdorff metric $\rho_\mathrm{H}$ on $\mathcal P(M)$ is defined by
			$$
			\rho_\mathrm{H}(X,Y) = \max \left\{ \sup_{x \in X} \rho(x,Y), \sup_{y \in Y} \rho(X,y) \right\},
			$$
			where $\rho(a, B) = \inf_{b \in B} \rho(a,b)$ for all $B \in \mathcal P(M)$ and $a \in M$.
			
			This metric can be used to measure how close two figures (as sets of points) are.
		%--------------------------------
	\end{enumerate}
\end{example}
%--------------------------------


%--------------------------------
\begin{definition}
	Let $X$ be a metric space, let $x \in X$, and $\varepsilon > 0$. The \textit{open ball with center $x$ and radius $\varepsilon$}, or more briefly the \textit{open $\varepsilon$-ball about $x$} is the subset
	$$
	B(x, \varepsilon) = \{ y \in X: \rho (x,y) \le \varepsilon \} \subseteq X.
	$$
	Similarly, the \textit{closed $\varepsilon$-ball around $x$} is
	$$
	\overline B (x, \varepsilon) = \{ y \in X: \rho(x,y) \le \varepsilon \} \subseteq X.
	$$
\end{definition}
%--------------------------------


%--------------------------------
\begin{note}
	Clearly, the word ``ball'' does not mean it should look like a ball. Clearly, for all $x \in \mathbb R^3$, the ball $\{ y \in \mathbb R^3 : \rho_\infty (x,y) < 1 \}$ is a cube without its surface.
	
	And it is interesting to think that on $C[a,b]$ with conditions above,
	$$
	\{ g \in C[a,b] : \rho_p(f,g) < 1 \}
	$$
	defines a open ball in $C[a,b]$.
	
	
\end{note}
%--------------------------------


%--------------------------------
\begin{note}
	For hamming metric $\rho$ with conditions above, for $\varepsilon \in \mathbb R_{(0,1)}$, the ball
	$$
	\{ y \in A^n : \rho(x,y) < 1 \} = \{x\}.
	$$
	is a singleton.
\end{note}
%--------------------------------


%--------------------------------
\begin{definition}
	Let $X$ be a metric space.
	\begin{enumerate}[(i)]
		\item A subset $U$ of $X$ is \textit{open in $X$} (or an \textit{open subset of $X$}) iff
		$$
		\forall u \in U, \ \exists \varepsilon \in \mathbb R_{> 0} , \;\; B(u, \varepsilon ) \subseteq U.
		$$
		\item A subset $V$ is \textit{closed in $X$} iff $X\setminus V$ is open in $X$.
	\end{enumerate}
\end{definition}
%--------------------------------


%--------------------------------
\begin{note}
	Equivalently, $U$ is open in $X$ iff $\exists \varepsilon \in \mathbb R_{>0}$,
	$$
	U = \bigcup_{x \in U} B(x, \varepsilon );
	$$
	and $V$ is closed in $X$ iff
	$$
	V = X \setminus \bigcup_{x \in U} B(x, \varepsilon) = \bigcap_{x \in U} (X \setminus B(x, \varepsilon)),
	$$
	by De Morgan's Law.
\end{note}
%--------------------------------


%--------------------------------
\begin{definition}
	Let $X$ be a metric space, let $\{x_n\}_{n = 1}^{\infty}$ be a sequence in $X$ and let $x \in X$. Then $\{x_n\}$ \textit{converges} in $X$ iff
	$$
	\exists x \in X, \lim_{n \to \infty} d(x_n, x) = 0.
	$$
	Explicitly, then, $\{ x_n \}$ converges to $x$ iff
	$$
	\forall \varepsilon \in \mathbb R_{> 0}, \exists N \in \mathbb N_{\ge 1}, \forall n \in \mathbb N_{\ge N}, \quad d(x_n , x) < \varepsilon.
	$$
\end{definition}
%--------------------------------


%--------------------------------
\begin{note} \ 
	\begin{enumerate}
		\item Equivalently, $\{x_n\}$ converges in $X$ iff
			$$
			\exists x \in X, \ \forall \varepsilon \in \mathbb R_{>0}, \# (\{ x_n \} \cap B(x,\varepsilon)) = \aleph_0 \land \# ( \{x_n\} \setminus B(x, \varepsilon)) < \aleph_0.
			$$
			In other words, $B(x, \varepsilon)$ contains all but finitely many $x_n$.
		\item Let $X \subseteq S$. $\{x_n\}$ converges to $x \in S$ does not means it need to converge in $X$. For example $\mathbb Q \subseteq \mathbb R$, the sequence
			$$
			\left\{ x_n = \frac{1}{x} + r : r^2 = 2 \right\}_{n \in \mathbb N}
			$$
			does converge to $\sqrt{2} \in \mathbb R$, but $\sqrt{2} \notin \mathbb Q$, so $\{x_n\}$ converges in $\mathbb R$, but does not converge in $\mathbb Q$.
	\end{enumerate}
\end{note}
%--------------------------------


%--------------------------------
\begin{lemma}
	Let $X$ be a metric space and $V \subseteq X$. Then $V$ is closed in $X$ iff
	$$
	\forall \{x_n\}_{n = 1}^\infty \subseteq V, \ \forall x \in X, \quad \lim_{n \to \infty} d(x_n, x) = 0 \implies x \in V.
	$$
\end{lemma}
%--------------------------------


%--------------------------------
\begin{proof}
	Suppose $V$ is closed in $X$, then $X \setminus V$ is open in $X$. Suppose $\exists x \in X \setminus V$, such that $\exists \{x_n\}_{n = 1}^\infty \subseteq V$, $\{x_n\}$ converges to $x$, then $\forall \varepsilon \in \mathbb R_{> 0}$, $B(x, \varepsilon) \cap \{x_n\} \ne \emptyset$. $\{x_n\} \subseteq V$, so $B(x, \varepsilon) \cap V \ne \emptyset$. This implies that $X \setminus V$ is not open, then $V$ is not closed (for if $V$ is closed, then $X \setminus V$ is open). It is contradicted to the assumption.
	
	Now, suppose $V$ is not closed in $X$, then $X \setminus V$ is not open. Then, $\exists p \in X \setminus V$, such that $\forall \varepsilon \in \mathbb R_{> 0}$, $B(p, \varepsilon) \cap V \ne \emptyset$. This implies there are some $\{x_n\}_{n = 1}^\infty \subseteq V$, such that $B(p, \varepsilon)$ contains all but finite elements in $\{x_n\}$. Thus, $\{x_n\}$ converges to $p \in X \setminus V$, contradicting to the conditions.
\end{proof}
%--------------------------------


%--------------------------------
\begin{lemma}
	\label{lem: open sets are closed under blah blah blah}
	Let $X$ be a metric space, and $\mathcal T$ be the family of open subsets of $X$. Then,
	\begin{enumerate}[(i)]
		\item $\mathcal T$ is closed under arbitrary union.
		\item $\mathcal T$ is closed under finite intersection.
		\item $\emptyset, X \in \mathcal T$.
	\end{enumerate}
\end{lemma}
%--------------------------------


%--------------------------------
\begin{proof} \ 
	\begin{enumerate}
		\item Let $I$ be an index set. For all $i \in I$, let $U_i \in \mathcal T$. Then for some $\varepsilon \in \mathbb R_{> 0}$,
			$$
			U_i = \bigcup_{x \in U_i} B(x, \varepsilon).
			$$
			Let $U = \bigcup_{i \in I} U_i$, then we have,
			$$
			U = \bigcup_{i \in I} \bigcup_{x \in U_i} B(x, \varepsilon) = \bigcup_{x \in U} B(x, \varepsilon)
			$$
			for some $\varepsilon \in \mathbb R_{> 0}$.
		
		\item Let $\mathcal C$ be the family of closed subsets of $X$, and let $U, V \in \mathcal C$. Then for all $\{u_n\}_{n = 1}^\infty \subseteq U$, $\forall u \in X$, $\{u_n\}$ converges to $u$ implies that $u \in U$. It also holds for $U \cup V \supseteq U$. Similarly, for all $\{v_m\}_{m = 1}^\infty$, $\forall v \in X$, $\{v_m\}$ converges to $v$ implies $v \in V$. It also holds for $U \cup V \supseteq V$. Thus $U \cup V$ is closed.
			
			Then, $X \setminus (U \cup V) = (X \setminus U) \cap (X \setminus V)$ is open, where $X \setminus U$ and $X \setminus V$ are open for $U$ and $V$ are closed.
		
		\item $\emptyset = \bigcup_{i \in \emptyset} U_i$ for all $U_i \in \mathcal T$, so $\emptyset$ is open. $\emptyset = U \cap V$ for all mutually disjoint closed subsets $U, V \subseteq X$, so $\emptyset$ is closed, so $X = X \setminus \emptyset$ is open.
	\end{enumerate}
\end{proof}
%--------------------------------


%--------------------------------
\begin{lemma}
	Let $X$ be a metric space, and $\mathcal C$ be the family of all closed subsets of $X$. Then,
	\begin{enumerate}[(i)]
		\item $\mathcal C$ is closed under arbitrary intersection.
		\item $\mathcal C$ is closed under finite union.
		\item $\emptyset, X \in \mathcal C$.
	\end{enumerate}
\end{lemma}
%--------------------------------


%--------------------------------
\begin{proof}
	Let $\mathcal T$ be the family of all open subset of $X$, and let $I$ be any index set.
	\begin{enumerate}
		\item It has been proved that $\mathcal T$ is closed under arbitrary union, so by De Morgan's law, for any $i \in I$, if $U_i \in \mathcal T$, then
			$$
			X \setminus \bigcup_{i \in I} U_i = \bigcap_{i \in I} (X \setminus U_i) \in \mathcal C.
			$$
		\item It has been proved in Lemma \ref{lem: open sets are closed under blah blah blah}.
		\item It has been proved that $\emptyset$ is open in $X$. So $X = X \setminus \emptyset$ is closed in $X$.
	\end{enumerate}
\end{proof}
%--------------------------------



%--------------------------------
\begin{definition}
	\label{def: continuous function}
	Let $(X, \rho)$ and $(Y, \rho')$ be metric spaces. A function $f: (X, \rho) \to (Y, \rho)$ is \textit{continuous} on a point $p \in X$ iff
	$$
	\forall \varepsilon \in \mathbb R_{> 0}, \ \exists \delta \in \mathbb R_{> 0}, \ \forall x \in B(p, \delta), \quad f(x) \in B(f(p), \varepsilon).
	$$
\end{definition}
%--------------------------------


%--------------------------------
\begin{note} \
	\begin{enumerate}
		\item If $\rho$ is a discrete metric on $X$, then $B(p, \delta) = \{p\}$ for all $\delta$. Then, by definition, for all $\varepsilon$, $f(x) \in B(f(p), \varepsilon)$. So $f$ is continuous everywhere.
		
		\item On the contrary, if $\rho'$ is a discrete metric on $Y$, but for all $p\in X$, $\rho$ suffices for all $\delta \in \mathbb R_{> 0}$, $\# B(p, \delta) \ge \aleph_0$, then for some $\varepsilon \in \mathbb R_{>0}$, for all $\delta \in \mathbb R_{> 0}$, there exists $x \in B(p, \delta)$, such that $f(x) \notin B(f(p), \varepsilon)$. Thus $f$ is not continuous on such $p$.
	\end{enumerate}
\end{note}
%--------------------------------


%--------------------------------
\begin{lemma}
	Let $(X, \rho)$ and $(Y, \rho')$ be metric spaces and let $f: (X, \rho) \to (Y, \rho)$ be a function. The following are equivalent:
	\begin{enumerate}[(i)]
		\item $f$ is continuous on $X$;
		\item for all open $U \subseteq Y$, the preimage $f^{-1}[U] \subseteq X$ is open;
		\item for all closed $V \subseteq Y$, the preimage $f^{-1}[V] \subseteq X$ is closed.
	\end{enumerate}
\end{lemma}
%--------------------------------


%--------------------------------
\begin{proof} \ 
	For (i) $\implies$ (ii), suppose $f$ is continuous on $X$, then, by Definition \ref{def: continuous function}, for all $p \in X$, there exists $B(p, \delta)$, such that $f(x) \in B(f(p), \varepsilon)$.
	
\end{proof}
%--------------------------------





























%